# Plan de Tests

---

## Exigences Fonctionnalités à tester

Identifiants des fonctionnalités | Description de fonctionnalités
--- | ---
EF - 001 | Commencer le traitement d'une déclaration ou accumuler des statistiques
EF - 002 | Effectuer la validation d'une déclaration d'activités pour un ordre professionel (architectes, géologues, psychologues, podiatres)
EF - 003 | Produire la liste des statistiques
EF - 004 | Réinitialiser les statistiques

## Suites et cas de tests

Identifiants des fonctionnalités | Identifiants des suites de tests | Description de suites de tests | Nombre de cas de tests
--- | --- | --- | ---
EF - 001 | ST - 001 | Tester les appels par ligne de commande                                                | 6
EF - 002 | ST - 002 | Tester les règles de validation pour un ordre professionnel *(cela inclut les tests du fichier d'entrée)*                                                                                                            | 40
EF - 003 | ST - 003 | Tester la production de la liste des statistiques                                      | 11
EF - 004 | ST - 004 | Tester la réinitialisation des statistques                                             | 1

## Cas de tests 
*(Arrivé à un cas de test CT - 00N, on considèrera verifiés/validés tous les cas de tests precèdents CT - 00(N-k) afin de ne pas faire la même vérification plusieurs fois.)*

| Identifiants des suites de tests | Identifiants des cas de tests | Description des cas de tests | Préconditions | Sortie attendue | Priorité |
--- | --- | --- | --- | --- | ---
| ST - 001 | CT - 001 | Appeler le programme *sans ou avec plus que deux* arguments | La ligne de commande est `java -jar FormationContinue.jar` | **Message console**: "Commande non reconnue. Pour soumettre une déclaration : `java -jar FormationContinue.jar declaration.json resultat.json` avec des fichiers en JSON. Pour afficher des statistiques : `java -jar FormationContinue.jar -S`. Pour réinitialiser les statistiques : `java -jar FormationContinue.jar -SR`"| haute
| ST - 001 | CT - 002 | Appeler le programme avec *un* argument invalide | La ligne de commande est `java -jar FormationContinue.jar argumentInvalide` | **Message console** : Argument invalide. Un appel avec 1 argument vous permets d'afficher des statistiques : `java -jar FormationContinue.jar -S` ou de les réinitialiser : `java -jar FormationContinue.jar -SR` | haute
| ST - 001 | CT - 003 | Appeler le programme avec *deux* arguments invalides | La ligne de commande est `java -jar FormationContinue.jar argumentInvalide1 argumentInvalide2` | **Message console** : Le fichier de sortie ou le fichier d'entrée est introuvable. Un appel avec deux arguments vous permets de soumettre une déclaration. Assurez vous d'avoir correctement entrées vos fichiers et qu'ils sont au format JSON. Exemple :  `java -jar FormationContinue.jar declaration.json resultat.json` | haute
| ST - 001 | CT - 004 | Appeler le programme avec l'argument `-S` | La ligne de commande est `java -jar FormationContinue.jar -S` | Aller à ST - 003 | haute
| ST - 001 | CT - 005 | Appeler le programme avec l'argument `-SR` | La ligne de commande est `java -jar FormationContinue.jar -SR` | Aller à ST - 004 | haute
| ST - 001 | CT - 006 | Appeler le programme avec un fichier d'entrée et de sortie existants au format JSON | La ligne de commande est par exemple `java -jar FormationContinue.jar declaration.json resultat.json` | Aller à ST - 002 | haute
|          |          |  |  |  |
| ST - 002 | CT - 007 | Soumettre un fichier d'entrée invalide  | Le fichier d'entrée présente des champs vides et/ou ne respecte pas la synthaxe JSON | Fin de l'exécution. **Message console et JSON sortie** : "Le fichier d'entrée est invalide (des champs sont vides), le cycle est incomplet". La déclaration est **invalide**. $complet = false $| haute 
| ST - 002 | CT - 008 | Le fichier d'entrée présente des champs déclarés au mauvais type | Exemple : Le champ `"nom"` n'est pas une chaine de caractère. Exemple : `"nom" : 1234,`  | Fin de l'exécution. **Message console et JSON sortie** : "Le fichier d'entrée est invalide, veuillez verifier que vos champs ont les bons types. Le numéro de permis, le nom, le prénom, le cycle, l'ordre, doivent être une chaine de caractère. Les heures doivent être des entiers positifs"; La déclaration est **invalide**. $complet = false $  | haute
| ST - 002 | CT - 009 | Soumettre un fichier d'entrée avec un **sexe** $\notin$ {0, 1, 2} | Le champ `"sexe"` $\notin$ {0, 1, 2}  | **Message JSON sortie** : "Le fichier d'entrée est invalide : le sexe doit appartenir à {0, 1, 2}, le cycle est incomplet". La déclaration est **invalide**. $complet = false $ | haute
| ST - 002 | CT - 010 |  Soumettre un fichier d'entrée avec un **ordre** non reconnu  | Le champ `"ordre"` $\notin$ {"architectes", "géologues", "psychologues", "podiatres"}. Exemple :  `"ordre" : "archéologue",`| **Message JSON sortie** : "Ordre non reconnu : `archéologue`". La déclaration est **invalide**. $complet = false $  | haute
| ST - 002 | CT - 011 | Soumettre un fichier d'entrée avec un nom ou prénom laissé comme chaine de caractère vide | Exemple : Le champ `"nom" : "",`| **Message JSON sortie** : "Le champ nom et/ou prenom doivent être mentionnés, ne pas le laisser vide, la déclaration est invalide". La déclaration est **invalide**. $complet = false $| haute
|          |          |  |  |  |
| ST - 002 | CT - 012 | Soumettre une déclaration pour l'Ordre **architectes** avec un cycle non pris en charge par cet ordre | Le champ `"ordre"` est `"architectes"` et le champ `"cycle"` $\notin$ {"2020-2022", "2018-2020", "2016-2018"} | Fin de l'exécution. **Message console et JSON sortie** : "Cycle invalide. Les cycles supportés pour les architectes sont "2020-2022", "2018-2020" ou "2016-2018". Le cycle est incomplet". La déclaration est **invalide**. $complet = false $ | haute
| ST - 002 | CT - 013 | Soumettre une déclaration pour l'Ordre **architectes** sans le champ **heures transferées du cycle précedents** | Le champ `"ordre"` est `"architectes"` et le champ `"heures_transferees_du_cycle_precedent"` est manquant | Fin de l'exécution. **Message console et JSON sortie** : "Le fichier d'entrée est invalide : le champ "heures_transferees_du_cycle_precedent" est manquant. La déclaration est **invalide**. $complet = false $ | haute 
| ST - 002 | CT - 014 | Soumettre une déclaration pour l'Ordre **architectes** avec trop d'**heures transferées du cycle précedents** | Le champ `"ordre"` est `"architectes"` et le champ `"heures_transferees_du_cycle_precedent"` contient plus que 7 heures | Ignorer le surplus d'heures : `"heures_transferees_du_cycle_precedent" = 7`. **Message JSON sortie** : "Le nombre d'heures transférées est supérieur à 7 : 7h maximum pris en charge dans les calculs"  | haute
| ST - 002 | CT - 015 | Soumettre une déclaration pour l'Ordre **architectes** avec des **heures transferées du cycle précedents** négatives | Le champ `"ordre"` est `"architectes"` et le champ `"heures_transferees_du_cycle_precedent"` contient une heure négative | **Message JSON sortie** : "Le nombre d'heures transférées est inférieur à 0 : les heures doivent être des entiers positifs". La déclaration est **invalide**. $complet = false $  | haute
| ST - 002 | CT - 016 | Soumettre une déclaration pour l'Ordre **architectes** avec un **numero de permis** pas supporté |  Le champ `"ordre"` est `"architectes"` et le champ `"numero_de_permis"` n'est pas au format supporté par cet ordre. Exemple : `"numero_de_permis" : "abcd"` | Fin de l'exécution. **Message console et JSON sortie** : "Le fichier d'entrée est invalide : le numéro de permis des architectes doit être composé d'une lettre suivie de 4 chiffres. La lettre peut être un A ou un T en majuscule. Exemple : `T3443`, le cycle est incomplet". La déclaration est **invalide**. $complet = false $ | haute
| ST - 002 | CT - 017 | Soumettre une déclaration pour l'Ordre **géologues** avec un cycle non pris en charge par cet ordre | Le champ `"ordre"` est `"géologue"` et le champ `"cycle"` $!=$ "2018-2021" | Fin de l'exécution. **Message JSON sortie** : "Cycle invalide. Le cycle supporté pour les géologues est "2018-2021". Le cycle est incomplet". La déclaration est **invalide**. $complet = false $ | haute
| ST - 002 | CT - 018 | Soumettre une déclaration pour l'Ordre **géologues** avec un **numero de permis** pas supporté |  Le champ `"ordre"` est `"géologues"` et le champ `"numero_de_permis"` n'est pas au format supporté par cet ordre. Exemple : `"numero_de_permis" : "abcd"` | Fin de l'exécution. **Message console et JSON sortie** : "Le fichier d'entrée est invalide : le numéro de permis des géologues doit être composé de 2 lettres suivies de 4 chiffres. La première lettre du numéro de permis correspond à la première lettre du nom du membre en majuscule. La deuxième lettre du numéro de permis correspond à la première lettre du prénom du membre en majuscule. Exemple : `"BJ3822"`, le cycle est incomplet". La déclaration est **invalide**. $complet = false $ | haute
| ST - 002 | CT - 019 | Soumettre une déclaration pour l'Ordre **podiatres** avec un cycle non pris en charge par cet ordre | Le champ `"ordre"` est `"podiatres"` et le champ `"cycle"` $!=$ "2018-2021" | Fin de l'exécution. **Message JSON sortie** : "Cycle invalide. Le cycle supporté pour les podiatres est "2018-2021". Le cycle est incomplet". La déclaration est **invalide**. $complet = false $ | haute
| ST - 002 | CT - 020 | Soumettre une déclaration pour l'Ordre **podiatres** avec un **numero de permis** pas supporté |  Le champ `"ordre"` est `"podiatres"` et le champ `"numero_de_permis"` n'est pas au format supporté par cet ordre. Exemple : `"numero_de_permis" : "abcd"` | Fin de l'exécution. **Message console et JSON sortie** : "Le fichier d'entrée est invalide : le numéro de permis des podiatres doit être composé de 5 chiffres. Exemple : `"83453"`, le cycle est incomplet". La déclaration est **invalide**. $complet = false $ | haute
| ST - 002 | CT - 021 | Soumettre une déclaration pour l'Ordre **psychologues** avec un cycle non pris en charge par cet ordre | Le champ `"ordre"` est `"psychologues"` et le champ `"cycle"` $!=$ "2018-2023" | Fin de l'exécution. **Message JSON sortie** : "Cycle invalide. Le cycle supporté pour les psychologues est "2018-2023". Le cycle est incomplet". La déclaration est **invalide**. $complet = false $ | haute
| ST - 002 | CT - 022 | Soumettre une déclaration pour l'Ordre **psychologues** avec un **numero de permis** pas supporté |  Le champ `"ordre"` est `"psychologues"` et le champ `"numero_de_permis"` n'est pas au format supporté par cet ordre. Exemple : `"numero_de_permis" : "abcd"` | Fin de l'exécution. **Message console et JSON sortie** : "Le fichier d'entrée est invalide : le numéro de permis des psychologues doit être composé de 5 chiffres, d'un trait d'union et de 2 autres chiffres. Exemple : `"83723-34"`, le cycle est incomplet". La déclaration est **invalide**. $complet = false $ | haute
| ST - 002 | CT - 023 | Soumettre une déclaration pour l'Ordre **géologues, pyschologues ou podiatres** avec le champ **heures transferées du cycle précedents** | Le champ `"ordre"` est `"géologues"`, `"pyschologues"` ou `"podiatres"`et le champ `"heures_transferees_du_cycle_precedent"` existe | **Message JSON sortie** : " Il n'existe aucun transfert d'heures vers un autre cycle. Le champ heures_transferees_du_cycle_precedent ne devrait pas exister". La déclaration est **invalide**. $complet = false $ | haute 
|          |          |  |  |  |
| ST - 002 | CT - 024 | Soumettre une déclaration pour un ordre avec une **activité** ayant des **heures négatives ou équivalentes à 0** | Une activité possède un nombre d'heure négatif ou équivalent à 0. |Ignorer l'activité. **Message console et JSON sortie** : Fichier invalide, les heures pour l'Activité: `description de l'activité` doivent être des entiers positif". La déclaration est **invalide**. $complet = false $ | haute
| ST - 002 | CT - 025 | Soumettre une déclaration pour un ordre avec une **activité** ayant une **description** ne respectant pas le nombre de caractère | Une activité possède une description de moins de 21 caractères. | Ignorer l'activité. **Message console et JSON sortie** : Fichier invalide,cycle incomplet : la description de: `description de l'activité` doit avoir un minimum de 21 caractères". La déclaration est **invalide**. | haute | 
| ST - 002 | CT - 026 | Soumettre une déclaration pour un ordre avec une **activité** ayant une **catégorie** non reconnue | Une activité possède une catégorie non reconnue. | Ignorer l'activité. **Message JSON sortie** : Activité non prise en charge: `description de l'activité`". La déclaration est **invalide**. | haute |
| ST - 002 | CT - 027 | Soumettre une déclaration pour un ordre avec une **activité** ayant une **date** qui n'est pas une chaine de caractère ISO8601  | Une date n'est pas en format ISO8601. | Ignorer l'activité. **Message JSON sortie** : La date de `description de l'activité` doit être au format YYYY-mm-dd - Activité ignorée". La déclaration est **invalide**. | haute
| ST - 002 | CT - 028 | Soumettre une déclaration pour un ordre avec une **activité** ayant une **date** qui n'existe pas sur le calendrier | Une date ne respecte pas le nombre de jour, de mois, et année bissextile du calendrier | Ignorer l'activité. **Message JSON sortie** : La date de `description de l'activité` n'existe pas. La déclaration est **invalide**. | haute
| ST - 002 | CT - 029 | Soumettre une déclaration pour un ordre avec une **activité** ayant une **date** qui est en dehors de l'intervalle du cycle considéré | Une activité n'est pas dans l'intervalle de dates du cycle. | Ignorer l'activité. **Message JSON sortie** : La date de `description de l'activité` est en dehors de l'intervalle - Activité ignorée". La déclaration est **invalide**. | haute
| ST - 002 | CT - 030 | Soumettre une déclaration pour un ordre avec un **total d'heures d'activité dans la même journée** supérieur à 10 | Le total d'heures d'activitées déclarées la même journée est supérieur à 10 heures. | Considérer les heures jusqu'à un total de 10 heures selon l'ordre d'apparition dans le fichier d'entrée et ignorer le reste. Produire un **Message JSON sortie** indiquant qu'il est interdit de dépasser 10 heures dans la même journée et indiquant quelles heures ont été prises en charges et dans quelles activitées | haute
|          |          |  |  |  |
| ST - 002 | CT - 031 | Soumettre une déclaration pour l'Ordre **architectes** sans respecter le minimum d'heures requises dans les 6 catégories (voir énoncé 1). | La somme des heures des activités appartenants à l'ensemble de ces catégories est inférieure à 17 | **Message JSON sortie** : `x` heures manquantes pour compléter la formation de 17h (cours,atelier,seminaire,colloque,conférence et lecture dirigée)." La déclaration est **incomplète**. $complet = false $  | haute
| ST - 002 | CT - 032 | Soumettre une déclaration pour l'Ordre **architectes** sans respecter le maximum d'heures autorisés dans la catégorie présentation | La somme des heures des activités appartenants à la catégorie présentation est supérieure à 23 | Ignorer le surplus d'heures dans cette catégorie | moyen
| ST - 002 | CT - 033 | Soumettre une déclaration pour l'Ordre **architectes** sans respecter le maximum d'heures autorisés dans la catégorie groupe de discussion | La somme des heures des activités appartenants à la catégorie groupe de discussion est supérieure à 17 | Ignorer le surplus d'heures dans cette catégorie | moyen
| ST - 002 | CT - 034 | Soumettre une déclaration pour l'Ordre **architectes** sans respecter le maximum d'heures autorisés dans la catégorie projet de recherche | La somme des heures des activités appartenants à la catégorie projet de recherche est supérieure à 23 | Ignorer le surplus d'heures dans cette catégorie | moyen
| ST - 002 | CT - 035 | Soumettre une déclaration pour l'Ordre **architectes** sans respecter le maximum d'heures autorisés dans la catégorie rédaction professionnelle | La somme des heures des activités appartenants à la catégorie rédaction professionnelle est supérieure à 17 | Ignorer le surplus d'heures dans cette catégorie | moyen
| ST - 002 | CT - 036 | Soumettre une déclaration pour l'Ordre **architectes** où les cycles "2016-2018" ou "2018-2020" de formation continue ne sont pas complets. | Les cycles "2016-2018" ou "2018-2020" ne présentent pas un total de 42h de formation continue  |  **Message JSON sortie** : `x` heures manquantes pour compléter le cycle." La déclaration est **incomplète**. $complet = false $ | haute
| ST - 002 | CT - 037 |  Soumettre une déclaration pour l'Ordre **architectes** où le cycle "2020-2022" de formation continue n'est pas complet. | Le cycle "2020-2022" ne présente pas un total de 40h de formation continue  |  **Message JSON sortie** : `x` heures manquantes pour compléter le cycle." La déclaration est **incomplète**. $complet = false $ | haute
| ST - 002 | CT - 038 | Soumettre une déclaration pour l'Ordre **géologue** ou **podiatres** sans respecter le minimum d'heures requises dans la catégorie cours | La somme des heures des activités appartenants à la catégorie projet de recherche est inférieure à 22 | **Message JSON sortie** : 22 heures de cours minimum requises pour `ordre`. La déclaration est **incomplète**. $complet = false $ | haute
| ST - 002 | CT - 039 | Soumettre une déclaration pour l'Ordre **géologue** ou **podiatres** sans respecter le minimum d'heures requises dans la catégorie projet de recherche | La somme des heures des activités appartenants à la catégorie projet de recherche est inférieure à 3 | **Message JSON sortie** : 3 heures de projet de recherche minimum requises pour `ordre`. La déclaration est **incomplète**. $complet = false $  | haute
| ST - 002 | CT - 040 | Soumettre une déclaration pour l'Ordre **géologue** ou **podiatres** sans respecter le minimum d'heures requises dans la catégorie groupe de discussion | La somme des heures des activités appartenants à la catégorie projet de recherche est inférieure à 1 |  **Message JSON sortie** : 1 heures de groupe de discussion minimum requises pour `ordre`. La déclaration est **incomplète**. $complet = false $  | haute
| ST - 002 | CT - 041 | Soumettre une déclaration pour l'Ordre **géologue** où le seul cycle de formation continue n'est pas complet. | Le seul cycle ne présente pas un total de 55h de formation continue  |  **Message JSON sortie** : `x` heures manquantes pour compléter le cycle." La déclaration est **incomplète**. $complet = false $ | haute
| ST - 002 | CT - 042 | Soumettre une déclaration pour l'Ordre **podiatres** où le seul cycle de formation continue n'est pas complet. | Le seul cycle ne présente pas un total de 60h de formation continue  |  **Message JSON sortie** : `x` heures manquantes pour compléter le cycle." La déclaration est **incomplète**. $complet = false $ | haute
| ST - 002 | CT - 043 | Soumettre une déclaration pour l'Ordre **psychologues** sans respecter le minimum d'heures requises dans la catégorie cours | La somme des heures des activités appartenants à la catégorie projet de recherche est inférieure à 25 | **Message JSON sortie** : 25 heures de cours minimum requises pour `ordre`. La déclaration est **incomplète**. $complet = false $ | haute
| ST - 002 | CT - 044 | Soumettre une déclaration pour l'Ordre **psychologues** sans respecter le maximum d'heures autorisés dans la catégorie conférence | La somme des heures des activités appartenants à la catégorie conférence est supérieure à 15 | Ignorer le surplus d'heures dans cette catégorie | moyen 
| ST - 002 | CT - 045 | Soumettre une déclaration pour l'Ordre **psychologues** où le seul cycle de formation continue n'est pas complet. | Le seul cycle ne présente pas un total de 90h de formation continue  |  **Message JSON sortie** : `x` heures manquantes pour compléter le cycle." La déclaration est **incomplète**. $complet = false $ | haute
| ST - 002 | CT - 046 | Soumettre une déclaration pour un ordre vérifiant toutes les régles | La déclaration vérifie toute les régles pour l'Ordre professionel considéré et le cycle est complet.  | **Message JSON sortie** : La déclaration à été complétée avec succés. $complet = true $  | haute
| ST - 003 | CT - 047 | Compter le nombre de déclarations traitées | Une déclaration quelconque à été soumise | Ajouter 1 au nombre de déclarations traitées | haute
| ST - 003 | CT - 048 | Compter le nombre de déclarations complètes | Une déclaration conforme au cas de test CT - 050 à été soumise | Ajouter 1 au nombre de déclarations complètes et au nombre de déclarations traitées | haute 
| ST - 003 | CT - 049 | Compter le nombre de déclartions incomplétes ou invalides | Une déclaration qui rencontre une situation semblables aux cas de tests CT - {7, 9 ,10, 11, 12, 13, 14, 15, 16, 17, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29} à été soumise | Ajouter 1 au nombre de déclartions incomplétes ou invalides et au nombre de déclarations traitées | haute 
| ST - 003 | CT - 050 | Compter le nombre de déclarations faites par des femmes | Une déclaration à été soumise avec un sexe = 2  | Ajouter 1 au nombre de déclarations faites par des femmes et au nombre de déclarations traitées  | haute  
| ST - 003 | CT - 051 | Compter le nombre de déclaration faites par des hommes | Une déclaration à été soumise avec un sexe = 1  | Ajouter 1 au nombre de déclarations faites par des hommes et au nombre de déclarations traitées  | haute  
| ST - 003 | CT - 052 | Compter le nombre de déclarations faites pas des gens de sexe inconnu | Une déclaration à été soumise avec un sexe = 0 | Ajouter 1 au nombre de déclarations faites par des gens de sexe inconnu et au nombre de déclarations traitées | haute  
| ST - 003 | CT - 053 | Compter le total d'activité dans les déclarations | Une déclaration contenant $x$ activitées à été soumise | Ajouter $x$ au total d'activité dans les déclarations et 1 au nombre de déclarations traitées | haute  
| ST - 003 | CT - 054 | Compter le nombre d'activités par catégorie | Une déclaration à été soumise avec $x$ activités dans la catégorie $y$ | Ajouter $x$ au nombre d'activités dans la catégorie $y$ et 1 au nombre de déclarations traitées | haute
| ST - 003 | CT - 055 | Compter le nombre total de déclarations valides et complétes par type d'ordre professionnel | Une déclaration  conforme au cas de test CT - 046 à été soumise pour un ordre $o$  | Ajouter 1 au nombre de déclarations valides et complétes par l'Ordre $o$ et 1 au nombre de déclarations traitées | haute  
| ST - 003 | CT - 056 | Compter le nombre total de déclarations valides et incomplétes par type d'ordre professionnel | Une déclaration qui rencontre une situation semblables aux cas de tests CT - {31, 36, 37, 38, 39, 40, 41, 42, 43, 45} à été soumise pour un ordre $o$ *(dépendant du cas de test)*  | Ajouter 1 au nombre déclarations valides et incomplétes pour l'Ordre $o$ et 1 au nombre de déclarations traitées | haute  
| ST - 003 | CT - 057 | Compter le nombre total de déclarations soumises avec un numéro de permis invalide | Une déclaration à été soumise avec un numéro de permis invalide : CT - {16, 18, 20, 22}  | Ajouter 1 au nombre de déclaratins soumises avec un numéro de permis invalide et 1 au nombre de déclarations traitées | haute
| ST - 004 | CT - 058 | Réinitialiser les statistiques | Le fichier des statistiques et rempli selon les cas de test de la suite ST - 003 | Tout les 11 champs du fichier doivent être égaux à 0. (Voir les champs dans l'énoncé du TP3)  | haute      